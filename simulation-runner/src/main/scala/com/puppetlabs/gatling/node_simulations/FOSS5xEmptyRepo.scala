package com.puppetlabs.gatling.node_simulations
import com.puppetlabs.gatling.runner.SimulationWithScenario
import org.joda.time.LocalDateTime
import org.joda.time.format.ISODateTimeFormat
import java.util.UUID

import scala.concurrent.duration._

import io.gatling.core.Predef._
import io.gatling.http.Predef._

class FOSS5xEmptyRepo extends SimulationWithScenario {

	val reportBody = ElFileBody("FOSS5xEmptyRepo_0004_request.txt")

	val baseHeaders = Map("Accept" -> "application/json, text/pson",
		"Accept-Encoding" -> "gzip;q=1.0,deflate;q=0.6,identity;q=0.3",
		"User-Agent" -> "Puppet/5.3.3 Ruby/2.4.2-p198 (x86_64-linux)")

	val headers_0 = baseHeaders ++ Map("X-Puppet-Version" -> "5.3.3")

	val headers_4 = baseHeaders ++ Map(
		"Connection" -> "close",
		"Content-Type" -> "application/json",
		"X-Puppet-Version" -> "5.3.3")

	val scn = scenario("FOSS5xEmptyRepo")
		.exec(http("node")
			.get("/puppet/v3/node/${node}?environment=20171208_empty_repo&configured_environment=20171208_empty_repo&transaction_uuid=ae3be17e-3b31-4a67-8ccf-641b585e229c&fail_on_404=true")
			.headers(headers_0))
		.exec(http("filemeta pluginfacts")
			.get("/puppet/v3/file_metadatas/pluginfacts?environment=20171208_empty_repo&links=follow&recurse=true&source_permissions=use&ignore=.svn&ignore=CVS&ignore=.git&ignore=.hg&checksum_type=md5")
			.headers(headers_0))
		.exec(http("filemeta plugins")
			.get("/puppet/v3/file_metadatas/plugins?environment=20171208_empty_repo&links=follow&recurse=true&source_permissions=ignore&ignore=.svn&ignore=CVS&ignore=.git&ignore=.hg&checksum_type=md5")
			.headers(headers_0))
		.pause(194 milliseconds)
		.exec(http("catalog")
			.post("/puppet/v3/catalog/${node}?environment=20171208_empty_repo")
			.headers(headers_0)
			.formParam("environment", "20171208_empty_repo")
			.formParam("facts_format", "application/json")
			.formParam("facts", "%7B%22name%22%3A%22${node}%22%2C%22values%22%3A%7B%22agent_specified_environment%22%3A%2220171208_empty_repo%22%2C%22aio_agent_version%22%3A%225.3.3%22%2C%22architecture%22%3A%22x86_64%22%2C%22augeas%22%3A%7B%22version%22%3A%221.8.1%22%7D%2C%22augeasversion%22%3A%221.8.1%22%2C%22bios_release_date%22%3A%2207%2F30%2F2013%22%2C%22bios_vendor%22%3A%22Phoenix%20Technologies%20LTD%22%2C%22bios_version%22%3A%226.00%22%2C%22blockdevice_fd0_size%22%3A4096%2C%22blockdevice_sda_model%22%3A%22Virtual%20disk%22%2C%22blockdevice_sda_size%22%3A10737418240%2C%22blockdevice_sda_vendor%22%3A%22VMware%22%2C%22blockdevice_sr0_model%22%3A%22VMware%20IDE%20CDR10%22%2C%22blockdevice_sr0_size%22%3A1073741312%2C%22blockdevice_sr0_vendor%22%3A%22NECVMWar%22%2C%22blockdevices%22%3A%22fd0%2Csda%2Csr0%22%2C%22boardmanufacturer%22%3A%22Intel%20Corporation%22%2C%22boardproductname%22%3A%22440BX%20Desktop%20Reference%20Platform%22%2C%22boardserialnumber%22%3A%22None%22%2C%22chassisassettag%22%3A%22No%20Asset%20Tag%22%2C%22chassistype%22%3A%22Other%22%2C%22dhcp_servers%22%3A%7B%22ens192%22%3A%2210.32.22.10%22%2C%22system%22%3A%2210.32.22.10%22%7D%2C%22disks%22%3A%7B%22fd0%22%3A%7B%22size%22%3A%224.00%20KiB%22%2C%22size_bytes%22%3A4096%7D%2C%22sda%22%3A%7B%22model%22%3A%22Virtual%20disk%22%2C%22size%22%3A%2210.00%20GiB%22%2C%22size_bytes%22%3A10737418240%2C%22vendor%22%3A%22VMware%22%7D%2C%22sr0%22%3A%7B%22model%22%3A%22VMware%20IDE%20CDR10%22%2C%22size%22%3A%221.00%20GiB%22%2C%22size_bytes%22%3A1073741312%2C%22vendor%22%3A%22NECVMWar%22%7D%7D%2C%22dmi%22%3A%7B%22bios%22%3A%7B%22release_date%22%3A%2207%2F30%2F2013%22%2C%22vendor%22%3A%22Phoenix%20Technologies%20LTD%22%2C%22version%22%3A%226.00%22%7D%2C%22board%22%3A%7B%22manufacturer%22%3A%22Intel%20Corporation%22%2C%22product%22%3A%22440BX%20Desktop%20Reference%20Platform%22%2C%22serial_number%22%3A%22None%22%7D%2C%22chassis%22%3A%7B%22asset_tag%22%3A%22No%20Asset%20Tag%22%2C%22type%22%3A%22Other%22%7D%2C%22manufacturer%22%3A%22VMware%2C%20Inc.%22%2C%22product%22%3A%7B%22name%22%3A%22VMware%20Virtual%20Platform%22%2C%22serial_number%22%3A%22VMware-42%2031%201f%20be%208c%205d%203f%201c-57%20b9%2025%202d%20a7%2022%205c%20f7%22%2C%22uuid%22%3A%2242311FBE-8C5D-3F1C-57B9-252DA7225CF7%22%7D%7D%2C%22domain%22%3A%22delivery.puppetlabs.net%22%2C%22facterversion%22%3A%223.9.3%22%2C%22fake_domain%22%3A%22pgtomcat.mycompany.org%22%2C%22filesystems%22%3A%22xfs%22%2C%22fqdn%22%3A%22${node}%22%2C%22function%22%3A%22app%22%2C%22gid%22%3A%22root%22%2C%22group%22%3A%22pgtomcat%22%2C%22hardwareisa%22%3A%22x86_64%22%2C%22hardwaremodel%22%3A%22x86_64%22%2C%22hostname%22%3A%22cpauq9t2043v47v%22%2C%22hypervisors%22%3A%7B%22vmware%22%3A%7B%22version%22%3A%22ESXi%205.5%22%7D%7D%2C%22id%22%3A%22root%22%2C%22identity%22%3A%7B%22gid%22%3A0%2C%22group%22%3A%22root%22%2C%22privileged%22%3Atrue%2C%22uid%22%3A0%2C%22user%22%3A%22root%22%7D%2C%22interfaces%22%3A%22ens192%2Clo%22%2C%22ipaddress%22%3A%2210.32.121.14%22%2C%22ipaddress6%22%3A%22fe80%3A%3A250%3A56ff%3Afeb1%3Af308%22%2C%22ipaddress6_ens192%22%3A%22fe80%3A%3A250%3A56ff%3Afeb1%3Af308%22%2C%22ipaddress6_lo%22%3A%22%3A%3A1%22%2C%22ipaddress_ens192%22%3A%2210.32.121.14%22%2C%22ipaddress_lo%22%3A%22127.0.0.1%22%2C%22is_virtual%22%3Atrue%2C%22kernel%22%3A%22Linux%22%2C%22kernelmajversion%22%3A%223.10%22%2C%22kernelrelease%22%3A%223.10.0-123.1.2.el7.x86_64%22%2C%22kernelversion%22%3A%223.10.0%22%2C%22load_averages%22%3A%7B%2215m%22%3A0.05%2C%221m%22%3A0.0%2C%225m%22%3A0.01%7D%2C%22macaddress%22%3A%2200%3A50%3A56%3Ab1%3Af3%3A08%22%2C%22macaddress_ens192%22%3A%2200%3A50%3A56%3Ab1%3Af3%3A08%22%2C%22manufacturer%22%3A%22VMware%2C%20Inc.%22%2C%22memory%22%3A%7B%22swap%22%3A%7B%22available%22%3A%22820.00%20MiB%22%2C%22available_bytes%22%3A859828224%2C%22capacity%22%3A%220%25%22%2C%22total%22%3A%22820.00%20MiB%22%2C%22total_bytes%22%3A859828224%2C%22used%22%3A%220%20bytes%22%2C%22used_bytes%22%3A0%7D%2C%22system%22%3A%7B%22available%22%3A%225.44%20GiB%22%2C%22available_bytes%22%3A5839446016%2C%22capacity%22%3A%224.07%25%22%2C%22total%22%3A%225.67%20GiB%22%2C%22total_bytes%22%3A6087299072%2C%22used%22%3A%22236.37%20MiB%22%2C%22used_bytes%22%3A247853056%7D%7D%2C%22memoryfree%22%3A%225.44%20GiB%22%2C%22memoryfree_mb%22%3A5568.9296875%2C%22memorysize%22%3A%225.67%20GiB%22%2C%22memorysize_mb%22%3A5805.30078125%2C%22mountpoints%22%3A%7B%22%2F%22%3A%7B%22available%22%3A%227.16%20GiB%22%2C%22available_bytes%22%3A7688146944%2C%22capacity%22%3A%2217.67%25%22%2C%22device%22%3A%22%2Fdev%2Fmapper%2Frhel-root%22%2C%22filesystem%22%3A%22xfs%22%2C%22options%22%3A%5B%22rw%22%2C%22seclabel%22%2C%22relatime%22%2C%22attr2%22%2C%22inode64%22%2C%22noquota%22%5D%2C%22size%22%3A%228.70%20GiB%22%2C%22size_bytes%22%3A9338617856%2C%22used%22%3A%221.54%20GiB%22%2C%22used_bytes%22%3A1650470912%7D%2C%22%2Fboot%22%3A%7B%22available%22%3A%22371.81%20MiB%22%2C%22available_bytes%22%3A389873664%2C%22capacity%22%3A%2225.14%25%22%2C%22device%22%3A%22%2Fdev%2Fsda1%22%2C%22filesystem%22%3A%22xfs%22%2C%22options%22%3A%5B%22rw%22%2C%22seclabel%22%2C%22relatime%22%2C%22attr2%22%2C%22inode64%22%2C%22noquota%22%5D%2C%22size%22%3A%22496.67%20MiB%22%2C%22size_bytes%22%3A520794112%2C%22used%22%3A%22124.86%20MiB%22%2C%22used_bytes%22%3A130920448%7D%2C%22%2Fdev%2Fshm%22%3A%7B%22available%22%3A%222.83%20GiB%22%2C%22available_bytes%22%3A3043647488%2C%22capacity%22%3A%220%25%22%2C%22device%22%3A%22tmpfs%22%2C%22filesystem%22%3A%22tmpfs%22%2C%22options%22%3A%5B%22rw%22%2C%22seclabel%22%2C%22nosuid%22%2C%22nodev%22%5D%2C%22size%22%3A%222.83%20GiB%22%2C%22size_bytes%22%3A3043647488%2C%22used%22%3A%220%20bytes%22%2C%22used_bytes%22%3A0%7D%2C%22%2Frun%22%3A%7B%22available%22%3A%222.83%20GiB%22%2C%22available_bytes%22%3A3034861568%2C%22capacity%22%3A%220.29%25%22%2C%22device%22%3A%22tmpfs%22%2C%22filesystem%22%3A%22tmpfs%22%2C%22options%22%3A%5B%22rw%22%2C%22seclabel%22%2C%22nosuid%22%2C%22nodev%22%2C%22mode%3D755%22%5D%2C%22size%22%3A%222.83%20GiB%22%2C%22size_bytes%22%3A3043647488%2C%22used%22%3A%228.38%20MiB%22%2C%22used_bytes%22%3A8785920%7D%2C%22%2Fsys%2Ffs%2Fcgroup%22%3A%7B%22available%22%3A%222.83%20GiB%22%2C%22available_bytes%22%3A3043647488%2C%22capacity%22%3A%220%25%22%2C%22device%22%3A%22tmpfs%22%2C%22filesystem%22%3A%22tmpfs%22%2C%22options%22%3A%5B%22rw%22%2C%22seclabel%22%2C%22nosuid%22%2C%22nodev%22%2C%22noexec%22%2C%22mode%3D755%22%5D%2C%22size%22%3A%222.83%20GiB%22%2C%22size_bytes%22%3A3043647488%2C%22used%22%3A%220%20bytes%22%2C%22used_bytes%22%3A0%7D%7D%2C%22mtu_ens192%22%3A1500%2C%22mtu_lo%22%3A65536%2C%22netmask%22%3A%22255.255.240.0%22%2C%22netmask6%22%3A%22ffff%3Affff%3Affff%3Affff%3A%3A%22%2C%22netmask6_ens192%22%3A%22ffff%3Affff%3Affff%3Affff%3A%3A%22%2C%22netmask6_lo%22%3A%22ffff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%22%2C%22netmask_ens192%22%3A%22255.255.240.0%22%2C%22netmask_lo%22%3A%22255.0.0.0%22%2C%22network%22%3A%2210.32.112.0%22%2C%22network6%22%3A%22fe80%3A%3A%22%2C%22network6_ens192%22%3A%22fe80%3A%3A%22%2C%22network6_lo%22%3A%22%3A%3A1%22%2C%22network_ens192%22%3A%2210.32.112.0%22%2C%22network_lo%22%3A%22127.0.0.0%22%2C%22networking%22%3A%7B%22dhcp%22%3A%2210.32.22.10%22%2C%22domain%22%3A%22delivery.puppetlabs.net%22%2C%22fqdn%22%3A%22${node}%22%2C%22hostname%22%3A%22cpauq9t2043v47v%22%2C%22interfaces%22%3A%7B%22ens192%22%3A%7B%22bindings%22%3A%5B%7B%22address%22%3A%2210.32.121.14%22%2C%22netmask%22%3A%22255.255.240.0%22%2C%22network%22%3A%2210.32.112.0%22%7D%5D%2C%22bindings6%22%3A%5B%7B%22address%22%3A%22fe80%3A%3A250%3A56ff%3Afeb1%3Af308%22%2C%22netmask%22%3A%22ffff%3Affff%3Affff%3Affff%3A%3A%22%2C%22network%22%3A%22fe80%3A%3A%22%7D%5D%2C%22dhcp%22%3A%2210.32.22.10%22%2C%22ip%22%3A%2210.32.121.14%22%2C%22ip6%22%3A%22fe80%3A%3A250%3A56ff%3Afeb1%3Af308%22%2C%22mac%22%3A%2200%3A50%3A56%3Ab1%3Af3%3A08%22%2C%22mtu%22%3A1500%2C%22netmask%22%3A%22255.255.240.0%22%2C%22netmask6%22%3A%22ffff%3Affff%3Affff%3Affff%3A%3A%22%2C%22network%22%3A%2210.32.112.0%22%2C%22network6%22%3A%22fe80%3A%3A%22%7D%2C%22lo%22%3A%7B%22bindings%22%3A%5B%7B%22address%22%3A%22127.0.0.1%22%2C%22netmask%22%3A%22255.0.0.0%22%2C%22network%22%3A%22127.0.0.0%22%7D%5D%2C%22bindings6%22%3A%5B%7B%22address%22%3A%22%3A%3A1%22%2C%22netmask%22%3A%22ffff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%22%2C%22network%22%3A%22%3A%3A1%22%7D%5D%2C%22ip%22%3A%22127.0.0.1%22%2C%22ip6%22%3A%22%3A%3A1%22%2C%22mtu%22%3A65536%2C%22netmask%22%3A%22255.0.0.0%22%2C%22netmask6%22%3A%22ffff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%22%2C%22network%22%3A%22127.0.0.0%22%2C%22network6%22%3A%22%3A%3A1%22%7D%7D%2C%22ip%22%3A%2210.32.121.14%22%2C%22ip6%22%3A%22fe80%3A%3A250%3A56ff%3Afeb1%3Af308%22%2C%22mac%22%3A%2200%3A50%3A56%3Ab1%3Af3%3A08%22%2C%22mtu%22%3A1500%2C%22netmask%22%3A%22255.255.240.0%22%2C%22netmask6%22%3A%22ffff%3Affff%3Affff%3Affff%3A%3A%22%2C%22network%22%3A%2210.32.112.0%22%2C%22network6%22%3A%22fe80%3A%3A%22%2C%22primary%22%3A%22ens192%22%7D%2C%22operatingsystem%22%3A%22RedHat%22%2C%22operatingsystemmajrelease%22%3A%227%22%2C%22operatingsystemrelease%22%3A%227.0%22%2C%22os%22%3A%7B%22architecture%22%3A%22x86_64%22%2C%22family%22%3A%22RedHat%22%2C%22hardware%22%3A%22x86_64%22%2C%22name%22%3A%22RedHat%22%2C%22release%22%3A%7B%22full%22%3A%227.0%22%2C%22major%22%3A%227%22%2C%22minor%22%3A%220%22%7D%2C%22selinux%22%3A%7B%22config_mode%22%3A%22enforcing%22%2C%22current_mode%22%3A%22enforcing%22%2C%22enabled%22%3Atrue%2C%22enforced%22%3Atrue%2C%22policy_version%22%3A%2228%22%7D%7D%2C%22osfamily%22%3A%22RedHat%22%2C%22partitions%22%3A%7B%22%2Fdev%2Fmapper%2Frhel-root%22%3A%7B%22filesystem%22%3A%22xfs%22%2C%22mount%22%3A%22%2F%22%2C%22size%22%3A%228.71%20GiB%22%2C%22size_bytes%22%3A9349103616%2C%22uuid%22%3A%22498caf73-1cd9-4d9b-ae9f-0ea2f650b8ee%22%7D%2C%22%2Fdev%2Fmapper%2Frhel-swap%22%3A%7B%22filesystem%22%3A%22swap%22%2C%22size%22%3A%22820.00%20MiB%22%2C%22size_bytes%22%3A859832320%2C%22uuid%22%3A%22e9f7a72c-52ca-4a46-82fc-398fa5c75413%22%7D%2C%22%2Fdev%2Fsda1%22%3A%7B%22filesystem%22%3A%22xfs%22%2C%22mount%22%3A%22%2Fboot%22%2C%22size%22%3A%22500.00%20MiB%22%2C%22size_bytes%22%3A524288000%2C%22uuid%22%3A%22967e3fc9-3637-4c0a-b17e-d180cabcce9d%22%7D%2C%22%2Fdev%2Fsda2%22%3A%7B%22filesystem%22%3A%22LVM2_member%22%2C%22size%22%3A%229.51%20GiB%22%2C%22size_bytes%22%3A10212081664%2C%22uuid%22%3A%22X7vlQu-09d2-RGh3-0Qtl-nnYL-XteD-JBtYSd%22%7D%7D%2C%22path%22%3A%22%2Fusr%2Flocal%2Fsbin%3A%2Fusr%2Flocal%2Fbin%3A%2Fusr%2Fsbin%3A%2Fusr%2Fbin%3A%2Fopt%2Fpuppetlabs%2Fbin%3A%2Froot%2Fbin%3A%2Fsbin%22%2C%22physicalprocessorcount%22%3A1%2C%22processor0%22%3A%22Intel%28R%29%20Xeon%28R%29%20CPU%20E5-2680%20v3%20%40%202.50GHz%22%2C%22processor1%22%3A%22Intel%28R%29%20Xeon%28R%29%20CPU%20E5-2680%20v3%20%40%202.50GHz%22%2C%22processorcount%22%3A2%2C%22processors%22%3A%7B%22count%22%3A2%2C%22isa%22%3A%22x86_64%22%2C%22models%22%3A%5B%22Intel%28R%29%20Xeon%28R%29%20CPU%20E5-2680%20v3%20%40%202.50GHz%22%2C%22Intel%28R%29%20Xeon%28R%29%20CPU%20E5-2680%20v3%20%40%202.50GHz%22%5D%2C%22physicalcount%22%3A1%7D%2C%22productname%22%3A%22VMware%20Virtual%20Platform%22%2C%22puppetversion%22%3A%225.3.3%22%2C%22ruby%22%3A%7B%22platform%22%3A%22x86_64-linux%22%2C%22sitedir%22%3A%22%2Fopt%2Fpuppetlabs%2Fpuppet%2Flib%2Fruby%2Fsite_ruby%2F2.4.0%22%2C%22version%22%3A%222.4.2%22%7D%2C%22rubyplatform%22%3A%22x86_64-linux%22%2C%22rubysitedir%22%3A%22%2Fopt%2Fpuppetlabs%2Fpuppet%2Flib%2Fruby%2Fsite_ruby%2F2.4.0%22%2C%22rubyversion%22%3A%222.4.2%22%2C%22selinux%22%3Atrue%2C%22selinux_config_mode%22%3A%22enforcing%22%2C%22selinux_current_mode%22%3A%22enforcing%22%2C%22selinux_enforced%22%3Atrue%2C%22selinux_policyversion%22%3A%2228%22%2C%22serialnumber%22%3A%22VMware-42%2031%201f%20be%208c%205d%203f%201c-57%20b9%2025%202d%20a7%2022%205c%20f7%22%2C%22ssh%22%3A%7B%22ecdsa%22%3A%7B%22fingerprints%22%3A%7B%22sha1%22%3A%22SSHFP%203%201%20678029dbd06737d013e8cded0e1222e0950c6b01%22%2C%22sha256%22%3A%22SSHFP%203%202%203d2bb6e0047c1c7ef99dee74696e15a1c813d53b8a3d92079dd12d9d9be669bb%22%7D%2C%22key%22%3A%22AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBHkvfwClxVvdxDc4ADuzKSkYwQx6udBqctS9XAXB6yEdduWApC%2BFWskpjLQs61mKeWO2wpIscDIrC2LRhnXNqd8%3D%22%7D%2C%22rsa%22%3A%7B%22fingerprints%22%3A%7B%22sha1%22%3A%22SSHFP%201%201%20abc203895fdafaf7becd0af7480f26587b0ac44a%22%2C%22sha256%22%3A%22SSHFP%201%202%2066b3da48acc21a37c8229d9327d8bc2c52e64210445710114db5352689c1f324%22%7D%2C%22key%22%3A%22AAAAB3NzaC1yc2EAAAADAQABAAABAQDFeLm%2B%2BlQ2XDRHcGuqOf%2B%2FhGGNiZy0MITk6AmqAszur3f344ZmrEH5tViqaNtw8JNe330ocUP2I1SKYnqdHExkHUcrPjfLpNrdForcMnAmc3Q%2Bn3DA98uyOWrnOu9FYegUuv7XaPK8uDokJAK3qiBu59XwAtysldpJ7kdQ2BAQpqIap%2FtgRpuRrNfpyscui5UfaD3dHvWuMHHxSk3a7oWBt7acm0IqKePxXeaSNX5IO2UUokAcm45jHHJzh7TnY9Q5PAe1XtdRESrB8ADGgDSgUhG4cjOnvBwMvfRLR29%2FAML3RDwk7r6z6ZPyaptifwm74gml%2FVXbeCWT0jAigFGn%22%7D%7D%2C%22sshecdsakey%22%3A%22AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBHkvfwClxVvdxDc4ADuzKSkYwQx6udBqctS9XAXB6yEdduWApC%2BFWskpjLQs61mKeWO2wpIscDIrC2LRhnXNqd8%3D%22%2C%22sshfp_ecdsa%22%3A%22SSHFP%203%201%20678029dbd06737d013e8cded0e1222e0950c6b01%5CnSSHFP%203%202%203d2bb6e0047c1c7ef99dee74696e15a1c813d53b8a3d92079dd12d9d9be669bb%22%2C%22sshfp_rsa%22%3A%22SSHFP%201%201%20abc203895fdafaf7becd0af7480f26587b0ac44a%5CnSSHFP%201%202%2066b3da48acc21a37c8229d9327d8bc2c52e64210445710114db5352689c1f324%22%2C%22sshrsakey%22%3A%22AAAAB3NzaC1yc2EAAAADAQABAAABAQDFeLm%2B%2BlQ2XDRHcGuqOf%2B%2FhGGNiZy0MITk6AmqAszur3f344ZmrEH5tViqaNtw8JNe330ocUP2I1SKYnqdHExkHUcrPjfLpNrdForcMnAmc3Q%2Bn3DA98uyOWrnOu9FYegUuv7XaPK8uDokJAK3qiBu59XwAtysldpJ7kdQ2BAQpqIap%2FtgRpuRrNfpyscui5UfaD3dHvWuMHHxSk3a7oWBt7acm0IqKePxXeaSNX5IO2UUokAcm45jHHJzh7TnY9Q5PAe1XtdRESrB8ADGgDSgUhG4cjOnvBwMvfRLR29%2FAML3RDwk7r6z6ZPyaptifwm74gml%2FVXbeCWT0jAigFGn%22%2C%22stage%22%3A%22prod%22%2C%22swapfree%22%3A%22820.00%20MiB%22%2C%22swapfree_mb%22%3A819.99609375%2C%22swapsize%22%3A%22820.00%20MiB%22%2C%22swapsize_mb%22%3A819.99609375%2C%22system_uptime%22%3A%7B%22days%22%3A0%2C%22hours%22%3A5%2C%22seconds%22%3A20007%2C%22uptime%22%3A%225%3A33%20hours%22%7D%2C%22timezone%22%3A%22PST%22%2C%22uptime%22%3A%225%3A33%20hours%22%2C%22uptime_days%22%3A0%2C%22uptime_hours%22%3A5%2C%22uptime_seconds%22%3A20007%2C%22uuid%22%3A%2242311FBE-8C5D-3F1C-57B9-252DA7225CF7%22%2C%22virtual%22%3A%22vmware%22%2C%22whereami%22%3A%22portland%22%2C%22clientcert%22%3A%22${node}%22%2C%22clientversion%22%3A%225.3.3%22%2C%22clientnoop%22%3Afalse%7D%2C%22timestamp%22%3A%222017-12-08T11%3A30%3A42.109494978-08%3A00%22%2C%22expiration%22%3A%222125-12-08T12%3A00%3A42.109796191-08%3A00%22%7D")
			.formParam("configured_environment", "20171208_empty_repo")
			.formParam("transaction_uuid", "ae3be17e-3b31-4a67-8ccf-641b585e229c")
			.formParam("static_catalog", "true")
			.formParam("checksum_type", "md5.sha256")
			.formParam("fail_on_404", "true"))
		.exec((session:Session) => {
			session.set("reportTimestamp",
				LocalDateTime.now.toString(ISODateTimeFormat.dateTime()))
		})
		.exec((session:Session) => {
			session.set("transactionUuid",
				UUID.randomUUID().toString())
		})
		.exec(http("report")
			.put("/puppet/v3/report/${node}?environment=20171208_empty_repo&")
			.headers(headers_4)
			.body(reportBody))

}
